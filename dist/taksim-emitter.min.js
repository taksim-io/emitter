/**
 * @license MIT
 * taksim.io/emitter v0.1.4
 * https://github.com/taksim-io/emitter
 * Copyright (c) 2015 taksim.io
*/
!function(t,n){if("function"==typeof define&&define.amd)define(n);else if("object"==typeof exports)module.exports=n(t);else{var e=n(t);t.Emitter||(t.Emitter=e),t.taksim||(t.taksim={}),t.taksim.Emitter=e}}(this,function(){"use strict";function t(t){return t?s(t):void 0}function n(t,n,e){return function i(){t.off(n,i),e.apply(t,arguments)}}function e(t,n,e){t[n]=function(){t[n]=e}}function i(t,n){return t._t&&t._t[c]&&t._t[c][n]}function r(t){return i(t,"listeners")}function f(t,n,e){return t._t||(t._t={}),t._t[c]={},t._t[c][n]=e,e}function o(t,n){return f(t,"listeners",n)}function s(t){for(var n in h)h.hasOwnProperty(n)&&(t[n]=h[n]);return t}function u(t,n,e){for(var i in e)e.hasOwnProperty(i)&&t[n](i,e[i])}var c="emitter",h=t.prototype;return h.emit=function(){var t,n=r(this),e=Array.prototype.slice.call(arguments),i=e.shift();if(n&&n[i]){var f=n[i];if("function"==typeof f)t=f.apply(this,e);else{var o=f.length;f=f.slice();for(var s=0;o>s&&(t=f[s].apply(this,e),t!==!1);s++);}}return t},h.on=function(t,n){if("object"==typeof t)u(this,"on",t);else if("function"==typeof n){var e=t.split(" "),i=e.length,f=r(this);for(f||(f=o(this,{}));i--;)t=e[i],"function"!=typeof f[t]&&(f[t]||(f[t]=[]),f[t].push(n))}return this},h.once=function(t,e){if("object"==typeof t)u(this,"once",t);else if("function"==typeof e)for(var i=t.split(" "),r=i.length;r--;)this.on(t,n(this,i[r],e));return this},h.only=function(t,n){if("object"==typeof t)u(this,"only",t);else if("function"==typeof n){var e=t.split(" "),i=e.length,f=r(this);for(f||(f=o(this,{}));i--;){var s=e[i];"function"!=typeof f[s]&&(f[s]=n)}}return this},h.off=function(t,e){var i=arguments.length,f=r(this);if(!f)return this;if(0===i)o(this,null);else if(f[t])if(1!==i&&e&&"function"!=typeof f[t])for(var s=f[t],u=s.length,c=0;u>c;c++){var h=String(s[c]);if(h===String(e)||h===String(n(this,t,e))){s.splice(c,1);break}}else f[t]=null;else for(var l=t.split(" "),a=l.length;--a>=0;)this.off(l[a],e);return this},h.offence=function(t,i){var f=arguments.length,o=r(this),s=o[t];if(!o)return this;if(0===f)for(var u in o)o.hasOwnProperty(u)&&this.offence(u);else if(o[t])if(1!==f&&i&&"function"!=typeof s){if(i)for(var c=s.length,h=0;c>h;h++){var l=String(s[h]);if(l===String(i)||l===String(n(this,t,i))){e(s,h,s[h]);break}}}else"function() {on[event] = callbacks;}"!==String(s)&&(o[t]=function(){o[t]=s});else for(var a=t.split(" "),p=a.length;--p>=0;)this.offence(a[p],i);return this},h.getListeners=function(t){return(r(this)||{})[t]||[]},h.hasListeners=function(t){return!!this.getListeners(t).length},t});