/**
 * @license MIT
 * taksim.io/emitter v0.2.0
 * https://github.com/taksim-io/emitter
 * Copyright (c) 2015 taksim.io
*/
!function(t,n){if("function"==typeof define&&define.amd)define(n);else if("object"==typeof exports)module.exports=n(t);else{var e=n(t);t.Emitter||(t.Emitter=e),t.taksim||(t.taksim={}),t.taksim.Emitter=e}}(this,function(){"use strict";function t(t){return t?(r(f(t,c)),t):void r(this)}function n(t,n,e){return function i(){t.off(n,i),e.apply(t,arguments)}}function e(t,n,e){t[n]=function(){t[n]=e}}function i(t,n,e){for(var i in e)e.hasOwnProperty(i)&&t[n](i,e[i])}function r(t){return t._t||(t._t={}),t._t[l]={listeners:null},t._t.id=u++,t}function o(t){return t._t[l]}function f(t){var n=arguments.length;t||(t={});for(var e=1;n>e;e++){var i=arguments[e];if(i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}function s(t,n){var e=t.prototype,i=function(){this.constructor=t};i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,f(t.prototype,e)}var u=1,l="emitter",c=t.prototype;return c.emit=function(){var t,n=o(this).listeners,e=Array.prototype.slice.call(arguments),i=e.shift();if(n&&n[i]){var r=n[i];if("function"==typeof r)t=r.apply(this,e);else{var f=r.length;r=r.slice();for(var s=0;f>s&&(t=r[s].apply(this,e),t!==!1);s++);}}return t},c.on=function(t,n){if("object"==typeof t)i(this,"on",t);else if("function"==typeof n){var e=t.split(" "),r=e.length,f=o(this),s=f.listeners;for(s||(s=f.listeners={});r--;)t=e[r],"function"!=typeof s[t]&&(s[t]||(s[t]=[]),s[t].push(n))}return this},c.once=function(t,e){if("object"==typeof t)i(this,"once",t);else if("function"==typeof e)for(var r=t.split(" "),o=r.length;o--;)this.on(t,n(this,r[o],e));return this},c.only=function(t,n){if("object"==typeof t)i(this,"only",t);else if("function"==typeof n){var e=t.split(" "),r=e.length,f=o(this),s=f.listeners;for(s||(s=f.listeners={});r--;){var u=e[r];"function"!=typeof s[u]&&(s[u]=n)}}return this},c.off=function(t,e){var i=arguments.length,r=o(this),f=r.listeners;if(!f)return this;if(0===i)r.listeners=null;else if(f[t])if(1!==i&&e&&"function"!=typeof f[t])for(var s=f[t],u=s.length,l=0;u>l;l++){var c=String(s[l]);if(c===String(e)||c===String(n(this,t,e))){s.splice(l,1);break}}else f[t]=null;else{var p=t.split(" "),a=p.length;if(a>1)for(;a--;)this.off(p[a],e)}return this},c.offence=function(t,i){var r,f=arguments.length,s=o(this),u=s.listeners;if(!u)return this;if(0===f)for(var l in u)u.hasOwnProperty(l)&&this.offence(l);else if(u[t])if(1!==f&&i&&"function"!=typeof r){if(i){r=u[t];for(var c=r.length,p=0;c>p;p++){var a=String(r[p]);if(a===String(i)||a===String(n(this,t,i))){e(r,p,r[p]);break}}}}else r=u[t],"function() {on[event] = callbacks;}"!==String(r)&&(u[t]=function(){u[t]=r});else{var h=t.split(" "),y=h.length;if(y>1)for(;y--;)this.offence(h[y],i)}return this},c.getListeners=function(t){return(o(this).listeners||{})[t]||[]},c.hasListeners=function(t){return!!this.getListeners(t).length},t.mixin=f,t.extend=function(t,n){"function"!=typeof t&&(n=t,t=null);var e,i=this;return e=t?t:function(){return i.apply(this,arguments)},s(e,i),f(e,i),f(e.prototype,n),e},t});